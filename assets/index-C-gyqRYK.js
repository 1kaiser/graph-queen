(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();console.log("ğŸš€ Graph Queen - Starting initialization...");const d=document.getElementById("graphCanvas"),l=d.getContext("2d");let g=[],f=[],a=[],c=-1;const I=50;function p(){c<a.length-1&&(a=a.slice(0,c+1));const e={nodes:JSON.parse(JSON.stringify(g)),edges:JSON.parse(JSON.stringify(f))};a.push(e),a.length>I?a.shift():c++,console.log(`ğŸ’¾ State saved (${c+1}/${a.length})`)}function R(){if(c>0){c--;const e=a[c];g=JSON.parse(JSON.stringify(e.nodes)),f=JSON.parse(JSON.stringify(e.edges)),h(),console.log(`â†¶ Undo (${c+1}/${a.length})`)}else console.log("âš ï¸ Nothing to undo")}function C(){if(c<a.length-1){c++;const e=a[c];g=JSON.parse(JSON.stringify(e.nodes)),f=JSON.parse(JSON.stringify(e.edges)),h(),console.log(`â†· Redo (${c+1}/${a.length})`)}else console.log("âš ï¸ Nothing to redo")}function L(){const e={nodes:g,edges:f,metadata:{created:new Date().toISOString(),nodeCount:g.length,edgeCount:f.length}},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(n),i=`graph_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.json`,u=document.createElement("a");u.href=s,u.download=i,u.click(),URL.revokeObjectURL(s),console.log(`ğŸ’¾ Graph saved as ${i}`)}function S(){d.width=d.offsetWidth,d.height=d.offsetHeight,h()}function h(){l.clearRect(0,0,d.width,d.height);const e=d.width/2-200,t=d.height/2-100;l.strokeStyle="#333",l.lineWidth=2,l.beginPath(),l.moveTo(e-100,t+150),l.lineTo(e+50,t),l.stroke(),l.beginPath(),l.moveTo(e-50,t-100),l.lineTo(e+100,t+100),l.stroke(),l.beginPath(),l.moveTo(e,t-50),l.lineTo(e+150,t+150),l.stroke(),l.fillStyle="#1976D2",g.forEach(n=>{l.beginPath(),l.arc(n.x,n.y,8,0,Math.PI*2),l.fill(),l.fillStyle="#333",l.font="12px sans-serif",l.fillText(n.label,n.x+12,n.y+4),l.fillStyle="#1976D2"}),console.log("âœ… Graph drawn with",g.length,"nodes")}S();window.addEventListener("resize",S);p();document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="s"&&(e.preventDefault(),L()),(e.ctrlKey||e.metaKey)&&!e.shiftKey&&e.key==="z"&&(e.preventDefault(),R()),(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="z"&&(e.preventDefault(),C())});console.log("âŒ¨ï¸ Keyboard shortcuts enabled:");console.log("  Ctrl+S: Save graph");console.log("  Ctrl+Z: Undo");console.log("  Ctrl+Shift+Z: Redo");let r=null,v=0,O=0;const B=document.querySelectorAll(".draggable-panel");B.forEach(e=>{e.addEventListener("mousedown",t=>{if(t.target.tagName==="A"||t.target.closest("#fileInput"))return;r=e,r.classList.add("dragging");const n=r.getBoundingClientRect();v=t.clientX-n.left,O=t.clientY-n.top,console.log(`ğŸ–±ï¸ Started dragging: ${e.id}`)})});document.addEventListener("mousemove",e=>{if(r){const n=document.getElementById("container").getBoundingClientRect();let s=e.clientX-n.left-v,o=e.clientY-n.top-O;s=Math.max(0,Math.min(s,n.width-r.offsetWidth)),o=Math.max(0,Math.min(o,n.height-r.offsetHeight)),r.style.left=s+"px",r.style.top=o+"px",r.style.right="auto"}});document.addEventListener("mouseup",()=>{r&&(console.log(`âœ… Stopped dragging: ${r.id}`),r.classList.remove("dragging"),r=null)});const $=document.getElementById("fileInput");$.addEventListener("change",e=>{const t=e.target.files[0];if(t){console.log(`ğŸ“ File selected: ${t.name}`);const n=new FileReader;n.onload=s=>{console.log("ğŸ“„ File contents:",s.target.result.substring(0,200)+"..."),alert(`File uploaded: ${t.name}
Size: ${t.size} bytes`)},n.readAsText(t)}});const b=document.getElementById("textBox");b.addEventListener("input",e=>{console.log(`âœï¸ Text input: "${e.target.value}"`)});b.addEventListener("keypress",e=>{if(e.key==="Enter"&&e.target.value.trim()){const t=e.target.value.trim();console.log(`âœ… Enter pressed with text: "${t}"`);const n={x:Math.random()*(d.width-100)+50,y:Math.random()*(d.height-100)+50,label:t};g.push(n),h(),p(),e.target.value="",console.log(`ğŸ“Š Added node: ${t}`)}});const P=document.getElementById("slidePanel"),T=document.getElementById("ocrSlidePanel");P.addEventListener("click",e=>{e.target.tagName!=="A"&&(console.log("ğŸ¯ Opening OCR slide-in panel..."),T.classList.add("open"))});const k=document.getElementById("ocrImageInput"),y=document.getElementById("ocrPreview"),x=document.getElementById("extractBtn");let E=null;k.addEventListener("change",e=>{const t=e.target.files[0];if(t&&t.type.startsWith("image/")){E=t,console.log(`ğŸ“· Image selected: ${t.name}`);const n=new FileReader;n.onload=s=>{y.src=s.target.result,y.style.display="block",x.disabled=!1,console.log("âœ… Image preview loaded")},n.readAsDataURL(t)}});const m=document.getElementById("ocrStatus"),w=document.getElementById("ocrResult"),N=document.getElementById("useTextBtn");x.addEventListener("click",async()=>{if(!E){console.error("âŒ No image file selected");return}console.log("ğŸ” OCR integration in progress..."),m.className="loading",m.textContent="â³ ScribeOCR integration in progress... Please check back soon!",setTimeout(()=>{const e=`Sample OCR Text
This is a placeholder until ScribeOCR is fully integrated.
Node 1
Node 2
Node 3`;w.value=e,m.className="success",m.textContent="âœ… Demo text loaded (ScribeOCR integration coming soon)",N.disabled=!1,console.log("ğŸ’¡ ScribeOCR will be integrated after studying the full repository")},1e3)});N.addEventListener("click",()=>{const e=w.value.trim();if(!e)return;console.log("ğŸ“Š Adding OCR text to graph...");const n=e.split(`
`).filter(s=>s.trim().length>0).slice(0,10).map((s,o)=>{const i=s.trim().substring(0,30);return{x:100+o%3*150,y:100+Math.floor(o/3)*100,label:i}});g.push(...n),h(),p(),console.log(`âœ… Added ${n.length} nodes from OCR text`),alert(`Added ${n.length} nodes to the graph!`)});console.log("âœ¨ Graph Queen ready with OCR!");console.log("ğŸ’¡ Drag panels to reposition them");console.log("ğŸ’¡ Click slide-in button to open OCR panel");console.log("ğŸ’¡ Click upload button to select files");console.log("ğŸ’¡ Type in text box and press Enter to add nodes");
